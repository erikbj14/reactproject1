<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OpenStreetMap</title>
    <meta content="text/html; charset=UTF-8; X-Content-Type-Options=nosniff" http-equiv="Content-Type" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- OpenLayers CSS och JS -->
    <!--<link rel="stylesheet" href="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/css/ol.css" />-->
    <link rel="stylesheet" href="https://erikbj14.github.io/openlayers-host/ol.css">
    <!--<script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js"></script>-->
    <script src="https://erikbj14.github.io/openlayers-host/ol/ol.js" defer></script>
    <style>
        table {
            background-color: rgba(255, 99, 71, 0.5);
        }

        /*openstreetmap contributors*/
        /* Extra rad under attribution */
        .custom-attribution {
            position: absolute;
            left: 0;
            bottom: 15px;
            background-color: white;
            padding: 5px 10px;
            font-size: 11px;
            text-align: left;
            z-index: 999;
        }

        /* Stil för info-länken (ℹ️) */
        .info-attribution {
            position: absolute; 
            top: 14px; 
            left: 320px;
            z-index: 4000;
            text-decoration: none;
            background: none;
            border: none;
            font-size: 24px;
            color: blue;
        }

        /* Karta */
        #osm-map {
            position: fixed;
            height: 740px;
            width: 440px;
            top: 0;
            left: 0;
        }

        .dropdown {
            bottom: 100%;
            display: none;
            position: absolute;
            top: 450px; /* Adjust the top position as needed */
            left: 10px; /* Adjust the left position as needed */
            display: inline-block;
            z-index: 4000;
        }

        .dropdown:hover .dropdown-content {
            display: block;
            bottom: 100%;
        }

        .dropbtn {
            background-color: #3498DB;
            color: white;
            padding: 16px;
            font-size: 16px;
            border: none;
            cursor: pointer;
        }

        .dropbtn:hover, .dropbtn:focus {
            background-color: #2980B9;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f1f1f1;
            min-width: 160px;
            overflow: auto;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
        }

        /* Popup styling for Västra Bangatan */
        #popup-container2, #popup-container4 {
            position: absolute;
            top: 80px;
            left: 0px;
            height: 110px;
            width: 450px;
            background-color: white;
            padding: 10px;
            border: 2px solid blue; 
            border-radius: 5px;
            max-width: 300px;
            z-index: 3000;
            display: none; 
        }

        #display-info-table {
            position: absolute;
            top: 380px;
            left: 0px;
            background-color: white;
            padding: 10px;
            border: 2px solid black;
            border-radius: 5px;
            max-width: 300px;
            z-index: 3000;
        }

        #display-info-table th, #display-info-table td {
            padding: 5px;
            padding-top: 2px;
        }

    </style>
</head>
<body>
    <!-- Map -->
    <div id="osm-map"></div>

    <div class="dropdown">
        <a href="index.html">
            <button>Tillbaka</button>
        </a>
    </div>

    <script>
        var map = new ol.Map({
            target: 'osm-map',
            layers: [
                new ol.layer.Tile({
                    source: new ol.source.OSM()
                })
            ],
            view: new ol.View({
                center: ol.proj.fromLonLat([17.8621, 59.6268]),
                zoom: 15
            })
        });

        // Marker 1 Märsta station
        const marker11 = new ol.Feature({
            geometry: new ol.geom.Point(ol.proj.fromLonLat([17.8615, 59.62775])),
        });

        const markerStyle11 = new ol.style.Style({
            image: new ol.style.Icon({
                anchor: [0.5, 1],
                src: './location-dot-solid.svg',
                scale: 2,
            }),
        });

        marker11.setStyle(markerStyle11);

        const vectorSource11 = new ol.source.Vector({
            features: [marker11],
        });

        const vectorLayer11 = new ol.layer.Vector({
            source: vectorSource11,
        });
        map.addLayer(vectorLayer11);

        // Marker for Västra Bangatan
        const marker2 = new ol.Feature({
            geometry: new ol.geom.Point(ol.proj.fromLonLat([17.85978, 59.62945])),
        });

        const markerStyle2 = new ol.style.Style({
            image: new ol.style.Icon({
                anchor: [0.5, 1],
                src: './parking.svg',
                scale: 2,
            }),
        });

        marker2.setStyle(markerStyle2);

        const vectorSource2 = new ol.source.Vector({
            features: [marker2],
        });

        const vectorLayer2 = new ol.layer.Vector({
            source: vectorSource2,
        });

        map.addLayer(vectorLayer2);

        // Popup functionality
        function mouseOver(id) {
            if (id === "demo") {
                document.getElementById("demo").innerHTML = "Västra Bangatan";
                document.getElementById("popup-container2").style.display = "block";
                document.getElementById("popup-container4").style.display = "none";
            }
            else if (id === "demo2") {
                document.getElementById("demo2").innerHTML = "Brobyvägen";
                document.getElementById("popup-container4").style.display = "block";
                document.getElementById("popup-container2").style.display = "none";
            }
        }

        function mouseOut(id) {
            if (id === "demo") {
                document.getElementById("demo").innerHTML = "Västra Bangatan";
                document.getElementById("popup-container2").style.display = "none";
            }
            else if (id === "demo2") {
                document.getElementById("demo2").innerHTML = "Brobyvägen";
                document.getElementById("popup-container4").style.display = "none";
            }
        }

        const demoElement = document.getElementById("demo");
        demoElement.addEventListener("mouseover", function() { mouseOver("demo"); });
        demoElement.addEventListener("mouseout", function() { mouseOut("demo"); });

        const demoElement2 = document.getElementById("demo2");
        demoElement2.addEventListener("mouseover", function() { mouseOver("demo2"); });
        demoElement2.addEventListener("mouseout", function() { mouseOut("demo2"); });

    </script>

    <!-- Info table -->
    <table id="display-info-table">
        <tr>
            <td colspan="2" align="left" style="font-size: smaller;">
                <span style="display: inline-block; width: 10px; height: 10px; background-color: lightgreen; margin-right: 2px;"></span>Ledigt
                <span style="display: inline-block; width: 10px; height: 10px; background-color: yellow; margin-left: 5px; margin-right: 2px;"></span>Ev. ledigt
                <span style="display: inline-block; width: 10px; height: 10px; background-color: red; margin-left: 5px; margin-right: 2px;"></span>Fullt
            </td>
        </tr>
        <tr>
            <th colspan="2" align="left">Prognos</th>
        </tr>
        <tr id="row-1">
            <td id="id-cell-1"></td>
            <td id="color-indicator-cell-1" style="width: 80%;"></td>
        </tr>
        <tr id="row-2">
            <td id="id-cell-2"></td>
            <td id="color-indicator-cell-2" style="width: 80%;"></td>
        </tr>
        <tr id="row-3">
            <td id="id-cell-3"></td>
            <td id="color-indicator-cell-3" style="width: 80%;"></td>
        </tr>
        <tr id="row-4">
            <td id="id-cell-4"></td>
            <td id="color-indicator-cell-4" style="width: 80%;"></td>
        </tr>
    </table>

</body>
</html>

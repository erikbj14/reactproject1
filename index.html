<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OpenStreetMap</title>
    <meta content="text/html; charset=UTF-8; X-Content-Type-Options=nosniff" http-equiv="Content-Type"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/css/ol.css" />
    <script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js"></script>
    <script type="module" src="./src/main.js" defer></script>
    <style>
        /*openstreetmap contributors*/
        .ol-control.ol-attribution {
            left: 140px;
            padding-right: 120px;
            bottom: 20px;
        }
        /* Set the map height */
        #osm-map {
            position: fixed;
            height: 740px;
            width: 440px;
            top: 0px;
            left: 0px;
        }
        /* Exempel på dropdown-stilar */
        .dropdown, .dropdown2 {
            bottom: 100%;
            display: none;
            position: absolute;
            top: 550px;
            display: inline-block;
            z-index: 4000;
        }
        .dropdown { left: 155px; }
        .dropdown2 { left: 10px; }
        .dropbtn {
            background-color: #3498DB;
            color: white;
            padding: 16px;
            font-size: 16px;
            border: none;
            cursor: pointer;
        }
        .dropbtn:hover, .dropbtn:focus {
            background-color: #2980B9;
        }
        .dropdown-content, .dropdown2-content {
            display: none;
            position: absolute;
            background-color: #f1f1f1;
            min-width: 160px;
            overflow: auto;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
        }
        .dropdown-content a, .dropdown2-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }
        .dropdown a:hover, .dropdown2 a:hover {
            background-color: #ddd;
        }
        /* Rubrik */
        p { font-size: 35px; }
    </style>
</head>
<body>

<!-- Karta -->
<div id="osm-map"></div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var map = new ol.Map({
            target: 'osm-map',
            layers: [
                new ol.layer.Tile({
                    source: new ol.source.OSM()
                })
            ],
            view: new ol.View({
                center: ol.proj.fromLonLat([17.8500, 59.5067]),
                zoom: 9.7
            })
        });

        // Skapa marker för de olika hållplatserna
        // Marker 1 Häggvik
        const marker1 = new ol.Feature({
            geometry: new ol.geom.Point(ol.proj.fromLonLat([17.93242, 59.44424]))
        });
        marker1.setStyle(new ol.style.Style({
            image: new ol.style.Icon({
                anchor: [0.5, 1],
                src: 'https://www.openrailwaymap.org/js/images/marker-icon-2x.png',
                scale: 0.3
            })
        }));

        // Marker 2 Rotebro
        const marker2 = new ol.Feature({
            geometry: new ol.geom.Point(ol.proj.fromLonLat([17.91465, 59.47586]))
        });
        marker2.setStyle(new ol.style.Style({
            image: new ol.style.Icon({
                anchor: [0.5, 1],
                src: 'https://www.openrailwaymap.org/js/images/marker-icon-2x.png',
                scale: 0.3
            })
        }));

        // ... Andra markörer följer här (marker3, marker4, ... marker13)

        // Marker 14 Barkarby – Vi lägger till en egenskap 'station'
        const marker14 = new ol.Feature({
            geometry: new ol.geom.Point(ol.proj.fromLonLat([17.86436, 59.40515]))
        });
        marker14.set('station', 'Barkarby');  // Detta gör marker14 klickbar
        marker14.setStyle(new ol.style.Style({
            image: new ol.style.Icon({
                anchor: [0.5, 1],
                src: 'https://www.openrailwaymap.org/js/images/marker-icon-2x.png',
                scale: 0.3
            })
        }));

        // Marker 15 Jakobsberg
        const marker15 = new ol.Feature({
            geometry: new ol.geom.Point(ol.proj.fromLonLat([17.833, 59.4237]))
        });
        marker15.setStyle(new ol.style.Style({
            image: new ol.style.Icon({
                anchor: [0.5, 1],
                src: 'https://www.openrailwaymap.org/js/images/marker-icon-2x.png',
                scale: 0.3
            })
        }));

        // Samla alla markörer i en vector source
        const vectorSource = new ol.source.Vector({
            features: [marker1, marker2, /* ... marker3, marker4, ..., marker13, */ marker14, marker15]
        });
        const vectorLayer = new ol.layer.Vector({
            source: vectorSource
        });
        map.addLayer(vectorLayer);

        // Klickhändelse: Om marker med 'station' Barkarby klickas, gå till barkarby.html
        map.on('singleclick', function(evt) {
            map.forEachFeatureAtPixel(evt.pixel, function(feature) {
                if (feature.get('station') === 'Barkarby') {
                    window.location.href = "barkarby.html";
                }
            });
        });
    });
</script>

<!-- Dropdowns, popup och annan HTML kan finnas här -->
<div class="dropdown">
    <button onclick="myFunction()" class="dropbtn">Märsta 41/42<br><font size="2">& Arlanda</font></button>
    <div id="myDropdown" class="dropdown-content">
        <a href="arlanda.html">Arlanda</a>
        <a href="marsta.html">Märsta</a>
        <a href="rosersberg.html">Rosersberg</a>
        <a href="upplands_vasby.html">Upplands Väsby</a>
        <a href="rotebro.html" target="_self">Rotebro</a>
        <a href="norrviken.html">Norrviken</a>
        <a href="haggvik.html" target="_self">Häggvik</a>
        <a href="sollentuna.html">Sollentuna</a>
        <a href="helenelund.html">Helenelund</a>
        <a href="ulriksdal.html">Ulriksdal</a>
        <a href="solna.html">Solna</a>
    </div>
</div>
<div class="dropdown2">
    <button onclick="myFunction()" class="dropbtn">Bålsta 43<br><font size="2">Sthlm C, Odenplan</font></button>
    <div id="myDropdown" class="dropdown-content"> 
        <a href="balsta.html">Bålsta</a>
        <a href="bro.html">Bro</a>
        <a href="kungsangen.html">Kungsängen</a>
        <a href="kallhall.html">Kallhäll</a>
        <a href="jakobsberg.html">Jakobsberg</a>
        <a href="barkarby.html">Barkarby</a>
        <a href="spanga.html">Spånga</a>   
        <a href="sundbyberg.html">Sundbyberg</a>
        <a href="stockholm_odenplan.html">Odenplan</a>
        <a href="stockholm_city.html">Stockholm City</a>
    </div>
</div>
</body>
</html>

<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>Arlanda Karta</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- OpenLayers CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v5.3.0/ol.css">
  <script src="https://cdn.jsdelivr.net/npm/ol@v5.3.0/dist/ol.js"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
    }

    #osm-map {
      position: absolute;
      height: 660px;
      width: 440px;
      top: 100px;
      left: 8px;
    }

    .dropdown {
      position: absolute;
      top: 450px;
      left: 10px;
      z-index: 4000;
    }

    .dropdown button {
      background-color: #3498DB;
      color: white;
      padding: 16px;
      font-size: 16px;
      border: none;
      cursor: pointer;
    }

    .custom-attribution {
      position: absolute;
      left: 0;
      bottom: 35px;
      background-color: white;
      padding: 5px 10px;
      font-size: 11px;
    }

    #popup-container2 {
      position: absolute;
      top: 139px;
      left: 0px;
      height: 90px;
      width: 450px;
      background-color: white;
      padding: 10px;
      border: 2px solid blue;
      border-radius: 5px;
      max-width: 300px;
      z-index: 3000;
      display: none;
    }
  </style>
</head>
<body>

<!-- Kartan -->
<div id="osm-map"></div>

<!-- Tillbaka-knapp -->
<div class="dropdown">
  <a href="index.html"><button>Tillbaka</button></a>
</div>

<!-- Popup för parkering -->
<div id="popup-container2">
  <table width="300" border="0">
    <tr>
      <th width="15"><img src="parking.svg"></th>
      <th colspan="4" align="left">Om parkering Arlanda</th>
    </tr>
    <tr>
      <td colspan="5" rowspan="5">
        <table border="0">
          <tr><td align="left">Arlanda har inga infartsparkeringar för pendlare</td></tr>
        </table>
      </td>
    </tr>
  </table>
</div>

<!-- Informationstabell -->
<table width="440" border="0" style="position:absolute; top:780px; left:8px; background-color:rgba(255, 99, 71, 0.5);">
  <tr>
    <th width="15"><img src="parking2.svg"></th>
    <th width="175" align="left">Pendelparkering</th>
    <th width="15"><img src="train.svg"></th>
    <td width="240">
      Tågtider <a href="https://www.trafikverket.se/trafikinformation/tag/?Station=Arlanda C&ArrDep=departure"
        onclick="window.open(this.href, 'targetWindow', 'top=100, width=440, height=800'); return false;">Arlanda</a>
    </td>
  </tr>
  <tr>
    <th></th>
    <td id="demo" onmouseover="mouseOver('demo')" onmouseout="mouseOut('demo')">Om parkering Arlanda</td>
    <th></th>
    <td>Trafikverket</td>
  </tr>
  <tr>
    <th></th>
    <td>Källa:</td>
    <th></th>
    <td><button id="reloadButton" hidden>Återställ</button></td>
  </tr>
  <tr>
    <th></th>
    <td><a href="https://www.swedavia.se/arlanda/parkering/" target="_blank">Parkering Swedavia</a></td>
    <th></th>
    <td></td>
  </tr>
</table>

<!-- Attribution -->
<div class="custom-attribution">
  Kartdata från <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a>
  och dess bidragsgivare, under <a href="https://opendatacommons.org/licenses/odbl/" target="_blank">ODbL-licens</a>.
</div>

<!-- Info-knapp -->
<a href="om.html"
   style="position: absolute; top: 10px; left: 400px; z-index: 4000; text-decoration: none; background: white; padding: 5px 10px; border-radius: 5px;">ℹ️</a>

<!-- JS -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const map = new ol.Map({
      target: 'osm-map',
      layers: [
        new ol.layer.Tile({
          source: new ol.source.OSM()
        })
      ],
      view: new ol.View({
        center: ol.proj.fromLonLat([17.9286, 59.6491]),
        zoom: 15
      })
    });

    // Marker
    const marker = new ol.Feature({
      geometry: new ol.geom.Point(ol.proj.fromLonLat([17.9286, 59.6491])),
    });

    marker.setStyle(new ol.style.Style({
      image: new ol.style.Icon({
        anchor: [0.5, 1],
        src: 'location-dot-solid.svg',
        scale: 2
      })
    }));

    const vectorSource = new ol.source.Vector({ features: [marker] });
    const vectorLayer = new ol.layer.Vector({ source: vectorSource });
    map.addLayer(vectorLayer);

    // Klick: zooma in och visa "Återställ"
    map.on('click', function (event) {
      const clickedCoord = event.coordinate;
      const adjustedCoord = [clickedCoord[0] + 400, clickedCoord[1] + 250];
      const currentZoom = map.getView().getZoom();
      map.getView().animate({ zoom: currentZoom + 1, center: adjustedCoord });

      document.getElementById("popup-container2").style.display = "none";
      document.getElementById("reloadButton").hidden = false;
    });

    document.getElementById("reloadButton").addEventListener('click', function () {
      location.reload();
    });

    // Hover popup
    window.mouseOver = function (id) {
      if (id === "demo") {
        document.getElementById("popup-container2").style.display = "block";
      }
    }

    window.mouseOut = function (id) {
      if (id === "demo") {
        document.getElementById("popup-container2").style.display = "none";
      }
    }
  });
</script>
</body>
</html>
